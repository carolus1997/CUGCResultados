<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Gráfico de Radar</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</head>

<body>
    <section id="SeccionTitulo">
        <p class="fs-1">Resultados de la práctica</p>
    </section>
    <section id="SeccionGrande1">
        <section id="Seccion1_1">
            <div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">An item</li>
                    <li class="list-group-item">A second item</li>
                    <li class="list-group-item">A third item</li>
                    <li class="list-group-item">A fourth item</li>
                    <li class="list-group-item">And a fifth one</li>
                </ul>
                <br>
                <button type="button" class="btn btn-primary" id="consolidateButton">Consolidar Respuestas</button>
                <div id="percentageDisplay">Porcentaje de Idoneidad: <span id="averagePercentage">0</span>%</div>
                <br>
            </div>
        </section>
        <section id="Seccion1_2">
            <canvas id="radarChart" width="500" height="500"></canvas>
        </section>
    </section>



    <script>
        document.getElementById('consolidateButton').addEventListener('click', function () {
            google.script.run.withSuccessHandler(function (data) {
                document.getElementById('percentageValue').textContent = data.percentage;
                drawRadarChart(data.scores);
                document.getElementById('radarChart').style.display = 'block';
            }).consolidateResponses();
        });

        function drawRadarChart(data) {
            const labels = ["Comunicación", "Situación", "Decisión", "Mando y Control"];
            const ctx = document.getElementById('radarChart').getContext('2d');
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '% de Idoneidad',
                        data: data,
                        fill: true,
                        backgroundColor: "rgba(151,187,205,0.2)",
                        borderColor: "rgba(151,187,205,1)",
                        pointBackgroundColor: "rgba(151,187,205,1)",
                        pointBorderColor: "#fff",
                        pointHoverBackgroundColor: "#fff",
                        pointHoverBorderColor: "rgba(151,187,205,1)"
                    }]
                },
                options: {
                    scales: {
                        r: {
                            min: 0,
                            max: 10,
                            angleLines: { display: false }
                        }
                    },
                    elements: { line: { borderWidth: 3 } }
                }
            });
        }
    </script>
</body>

</html>